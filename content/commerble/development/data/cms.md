---
title: "CMSデータ"
weight: 40
description: 
---

# CMSデータ
CMSデータとは、テナントのシステム要件に応じて自由に設計できるデータです。  
実体はデータベースのテーブルと同様のものとお考え下さい。  
ECサイトに店舗情報や特集記事を掲載したい場合には、店舗情報・特集記事をCMSデータとして定義して利用することができます。

定義したCMSデータは、CMS管理画面・Web API からアクセスできます。

## データフィールド
定義は以下の6項目で構成されます。

|       項目名       |                            説明                             |
| :----------------- | :---------------------------------------------------------- |
| 表示名             | CMS管理画面で表示されるカラム名                             |
| カラム名           | テンプレート内やAPIで使用するカラム名                       |
| 型                 | フィールド型                                                |
| PKフラグ           | 主キー設定。テーブルに最低限1つ必要                         |
| NULL許容フラグ     | NULL許容設定                                                |
| スケジュールフラグ | スケジュールリスト設定 <sup>[1](cms#note1)</sup> |

<small id="note1">1. 商品ページ上限は、検索の要件に応じて変動します。現在利用は非推奨</small>  


## フィールド型

データフィールドは以下の型を指定することができます。

|      型名称      |      DB型      |          CLR型          |      制約       | 説明 |
| :--------------- | :------------- | :---------------------- | :-------------- | :--- |
| 整数             | int            | System.Int32            | [\d]+           |      |
| 長整数           | bigint         | System.Int64            | [\d]+           |      |
| 内部商品No       | int            | System.Int32            | [\d]+           |      |
| 名称             | nvarchar(128)  | System.String           | (.+){1,128}     |      |
| 略称             | nvarchar(64)   | System.String           | (.+){1,64}      |      |
| ショートテキスト | nvarchar(32)   | System.String           | (.+){1,32}      |      |
| フリーテキスト   | nvarchar(MAX)  | System.String           | .*              |      |
| ファイルパス     | nvarchar(128)  | System.String           | [-_/.\w]{1,128} |      |
| コンテンツタイプ | nvarchar(64)   | System.String           | [-./\w]{1,64}   |      |
| ファイル         | varbinary(MAX) | System.Data.Linq.Binary |                 |      |
| 日付時刻         | datetime       | System.DateTime         |                 |      |
| ONOFF            | bit            | System.Boolean          |                 |      |
| 金額             | money          | System.Decimal          | [\d]+           |      |
| 商品ID           | nchar(64)      | System.String           | (.+){1,64}      |      |
| URL              | nvarchar(256)  | System.String           | (.+){1,256}     |      |
| リストコード     | nchar(32)      | System.String           | [\w]{1,32}      |      |
| ルート項目       | nvarchar(64)   | System.String           | [-_.\w]{1,64}   |      |
| URLパラメータ    | nvarchar(200)  | System.String           | [-_.\w]{1,200}  |      |

## リレーション

リスト同士はリレーションを張ることができます。ただし、リレーションはOne to Many、もしくは、One to Oneに限り、Many to Manyを張る場合は中間テーブルを明示的に用意する必要があります。

|      項目名      |                          説明                          |
| :--------------- | :----------------------------------------------------- |
| 参照先リスト     | 親となるリストを指定します。                           |
| 参照先フィールド | 参照先リストのカラムを指定します。                     |
| 自フィールド     | 参照先フィールドに対する、外部キーカラムを指定します。 |

## 定義例

### 商品(Products)

|     表示名     |  カラム名   |      型      |  PK   | NULL許容 | 説明  |
| :------------- | :---------- | :----------- | :---: | :------: | :---: |
| 商品ID         | Id          | 内部商品No   |  〇   |          |       |
| 商品名         | Name        | 名称         |       |          |       |
| 外部ID1        | ExternalId1 | リストコード |       |          |       |
| 外部ID2        | ExternalId2 | リストコード |       |    〇    |       |
| 外部ID3        | ExternalId3 | リストコード |       |    〇    |       |
| 外部ID4        | ExternalId4 | リストコード |       |    〇    |       |
| 発売日         | ReleaseDate | 日付時刻     |       |          |       |
| 価格           | UnitPrice   | 金額         |       |          |       |
| 販売ステータス | ステータス  | 整数         |       |          |       |
| 販売開始日時   | SalesStart  | 日付時刻     |       |          |       |
| 販売終了日時   | SalesStart  | 日付時刻     |       |    〇    |       |

### 商品詳細(ProductDetails)

|    表示名    |  カラム名   |       型       |  PK   | NULL許容 | 説明  |
| :----------- | :---------- | :------------- | :---: | :------: | :---: |
| 商品ID       | Id          | 内部商品No     |  〇   |          |       |
| 表示用商品名 | Name        | 名称           |       |    〇    |       |
| 詳細         | Body        | フリーテキスト |       |    〇    |       |
| キーワード   | Keywords    | フリーテキスト |       |    〇    |       |
| 説明         | Description | フリーテキスト |       |    〇    |       |

| 参照先リスト | 参照先フィールド | 自フィールド |
| :----------- | :--------------- | :----------- |
| 商品         | 商品ID           | 商品ID       |




